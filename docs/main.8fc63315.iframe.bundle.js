(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{492:function(module,exports,__webpack_require__){__webpack_require__(493),__webpack_require__(649),__webpack_require__(650),__webpack_require__(851),__webpack_require__(852),__webpack_require__(858),__webpack_require__(859),__webpack_require__(857),__webpack_require__(854),__webpack_require__(860),__webpack_require__(855),__webpack_require__(856),__webpack_require__(861),module.exports=__webpack_require__(846)},559:function(module,exports){},650:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(359)},846:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(359).configure)([__webpack_require__(847),__webpack_require__(848)],module,!1)}).call(this,__webpack_require__(170)(module))},847:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=847},848:function(module,exports,__webpack_require__){var map={"./stories/Model.stories.tsx":853};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=848},853:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ModelScene",(function(){return ModelScene}));var MuscleGroup,Injury,objectSpread2=__webpack_require__(57),react_three_fiber_esm=__webpack_require__(35),objectWithoutProperties=__webpack_require__(232),react=__webpack_require__(0),Stage=__webpack_require__(871),slicedToArray=__webpack_require__(39),useGLTF=__webpack_require__(873),toConsumableArray=__webpack_require__(234);!function(MuscleGroup){MuscleGroup.Forearms="Forearms",MuscleGroup.Biceps="Biceps",MuscleGroup.Triceps="Triceps",MuscleGroup.Deltoid="Deltoid",MuscleGroup.Chest="Chest",MuscleGroup.Neck="Neck",MuscleGroup.Trapezius="Trapezius",MuscleGroup.Rhomboid="Rhomboid",MuscleGroup.UpperBack="Upper Back",MuscleGroup.ErectorSpinae="Erector Spinae",MuscleGroup.LatissimusDorsi="Latissimus Dorsi",MuscleGroup.Abdominis="Abdominis",MuscleGroup.Obliques="Obliques",MuscleGroup.Quadriceps="Quadriceps",MuscleGroup.Gluteus="Gluteus",MuscleGroup.Hamstrings="Hamstrings",MuscleGroup.HipFlexors="Hip Flexors",MuscleGroup.Adductors="Adductors",MuscleGroup.Abductors="Abductors",MuscleGroup.Calves="Calves",MuscleGroup.TibialisAnterior="Tibialis Anterior"}(MuscleGroup||(MuscleGroup={})),function(Injury){Injury.Shoulder="shoulder",Injury.Abs="abs",Injury.Wrist="wrist",Injury.Knee="knee",Injury.Elbow="elbow",Injury.Back="back",Injury.LowerBack="lowerBack"}(Injury||(Injury={}));var MuscleCollection=Object.freeze({Forearms:["forarm1_l","forarm2_l","forarm3_l","forarm1_r","forarm1_b_r","forarm2_b_r","forarm1_b_l","forarm2_b_l","forarm2_r","forarm3_r","forearms"],Biceps:["biceps_l","biceps_r","biceps"],Triceps:["triceps_l","triceps_r","triceps"],Deltoid:["deltoid_b_l","deltoid_b_r","deltoid_f_l","deltoid_f_r","deltoid"],Chest:["chest_l","chest_r","chest"],Neck:["neckF","neck"],Trapezius:["trapecius_f","trapecius_b","trapezius"],Rhomboid:["rhombopid_l","rhombopid_r","rhomboid"],ErectorSpinae:["erectorSpinae"],LatissimusDorsi:["latisimusDorsi_b_l","latisimusDorsi_b_r","latisimusDorsi_l","latisimusDorsi_r","latimusDorsi"],Abdominis:["abdonimis1_l","abdonimis1_r","abdonimis2_l","abdonimis2_r","abdonimis3_l","abdonimis3_r","abdonimis4_l","abdonimis4_r","abdonimis"],Obliques:["obliques_l","obliques_r"],Quadriceps:["quadriceps_l","quadriceps_r","quadriceps_r1","qudriceps"],Gluteus:["gluteus_l","gluteus_r","gluteus"],Hamstrings:["hamstring_l","hamstring_r","hamstrings"],HipFlexors:["hipFlexor_l","hipFlexor_r"],Abductors:["abducter_l","abducter_l1","abducter_r","abducter_r2","abducter_r4","abducter_r001","abducter_l001","abducters"],Adductors:["adducter_l","adducter_r"],Calves:["calves1_b_l","calves2_b_l","calves1_b_r","calves2_b_r","calves1_f_l","calves2_f_r1","calves3_f_l","calves1_f_r","calves2_f_r","calves3_f_r","calves2_f_l","calves"],TibialisAnterior:["tibialisAnterior_l","tibialisAnterior_r","tibialisAnterior"]}),Colors=Object.freeze({lowStimulation:"#9fb0ff",mediumStimulation:"#466cce",highStimulation:"#1c3c88",grey:"#525661",lightGrey:"#D6DCE8",white:"#FFFFFF",blueRibbon:"#005FFF",lightBlue:"#718cff"}),three_module=__webpack_require__(1),helpers_getMuscleGroupKey=function getMuscleGroupKey(muscleName){return Object.keys(MuscleCollection).filter((function(item){return MuscleCollection[item].includes(muscleName)||MuscleCollection[item].some((function(e){return e.includes(muscleName)}))}))},helpers_getPosition=function getPosition(obj){var boundingBox=(new three_module.Box3).setFromObject(obj),center=new three_module.Vector3;return boundingBox.getCenter(center),center},helpers_createInjuries=function createInjuries(group,key,value){var placeholderPosition=helpers_getPosition(value),newKey=null==key?void 0:key.split("_")[(null==key?void 0:key.split("_").length)-1],name="injury_".concat(newKey),geometry=new three_module.CircleGeometry(.02,32),geometryOuter=new three_module.CircleGeometry(.045,32),geometryFade=new three_module.CircleGeometry(.045,32),geometryFadeDelayed=new three_module.CircleGeometry(.045,32),injuryCross=new three_module.Mesh(geometry,new three_module.MeshBasicMaterial({map:(new three_module.TextureLoader).load("./assets/injuryCross.png")})),injuryMarkOuter=new three_module.Mesh(geometryOuter,new three_module.MeshBasicMaterial({color:16777215,opacity:1})),injuryMarkFade=new three_module.Mesh(geometryFade,new three_module.MeshBasicMaterial({color:"#FF0031",transparent:!0,opacity:1})),injuryMarkFadeDelayed=new three_module.Mesh(geometryFadeDelayed,new three_module.MeshBasicMaterial({color:"#FF0031",transparent:!0,opacity:1}));injuryCross.name=name,injuryMarkOuter.name=name,injuryMarkFade.name=name,injuryMarkFadeDelayed.name=name,injuryCross.userData={injury:name,type:"main"},injuryMarkOuter.userData={injury:name,type:"backdrop"},injuryMarkFade.userData={injury:name,type:"fade"},injuryMarkFadeDelayed.userData={injury:name,type:"fade-delayed"},injuryCross.position.set(placeholderPosition.x,placeholderPosition.y,.184),injuryMarkOuter.position.set(placeholderPosition.x,placeholderPosition.y,.183),injuryMarkFade.position.set(placeholderPosition.x,placeholderPosition.y,.18),injuryMarkFadeDelayed.position.set(placeholderPosition.x,placeholderPosition.y,.184),group.add(injuryCross),group.add(injuryMarkOuter),group.add(injuryMarkFade),group.add(injuryMarkFadeDelayed)},animateInjuryOuterRing=function animateInjuryOuterRing(obj){var _obj$userData;if("fade"===(null===(_obj$userData=obj.userData)||void 0===_obj$userData?void 0:_obj$userData.type)){var fadeAnimation=obj;obj.scale.x>=4&&(obj.scale.set(.1,.1,0),fadeAnimation.material.opacity=1),obj.scale.set(obj.scale.x+.03,obj.scale.y+.03,obj.scale.z+2),fadeAnimation.material.opacity-=.01}},animateInjuryInnerRing=function animateInjuryInnerRing(obj){var _obj$userData2;if("fade-delayed"===(null===(_obj$userData2=obj.userData)||void 0===_obj$userData2?void 0:_obj$userData2.type)){var fadeAnimation=obj;obj.scale.x>=4&&(obj.scale.set(.1,.1,0),fadeAnimation.material.opacity=1),obj.scale.set(obj.scale.x+.03,obj.scale.y+.03,obj.scale.z+2),fadeAnimation.material.opacity-=.01}},helpers_getHighlightColor=function getHighlightColor(name,clickedGroup,hovered,activeMuscles){var _activeMuscles$filter,stimulation=null===(_activeMuscles$filter=activeMuscles.filter((function(e){return e.name===name}))[0])||void 0===_activeMuscles$filter?void 0:_activeMuscles$filter.stimulation;return name.includes("sweep")||name.includes("outline")?Colors.white:(null==hovered?void 0:hovered.includes(name))?Colors.lightBlue:(null==clickedGroup?void 0:clickedGroup.includes(name))?Colors.grey:"low"===stimulation?Colors.lowStimulation:"medium"===stimulation?Colors.mediumStimulation:"high"===stimulation?Colors.highStimulation:"dangerous"===stimulation?"blue":Colors.lightGrey},isNegative=function isNegative(number){return number<=0},capitalizeFirstLetter=function capitalizeFirstLetter(string){var _string$charAt;return(null==string||null===(_string$charAt=string.charAt(0))||void 0===_string$charAt?void 0:_string$charAt.toUpperCase())+(null==string?void 0:string.slice(1))},helpers_getInjuryCoordinates=function getInjuryCoordinates(name){switch(name){case Injury.Shoulder:return{z:-142,points:[new three_module.Vector3(-24),new three_module.Vector3(-93)]};case Injury.Abs:return{z:-116,points:[new three_module.Vector3(-8),new three_module.Vector3(-95)]};case Injury.Wrist:return{z:-84,points:[new three_module.Vector3(-43),new three_module.Vector3(-95)]};case Injury.Knee:return{z:-46.5,points:[new three_module.Vector3(-17),new three_module.Vector3(-95)]};case Injury.LowerBack:return{z:-103,points:[new three_module.Vector3(0),new three_module.Vector3(-90)]};default:return{z:0,points:[new three_module.Vector3(0)]}}};try{helpers_getMuscleGroupKey.displayName="getMuscleGroupKey",helpers_getMuscleGroupKey.__docgenInfo={description:"",displayName:"getMuscleGroupKey",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/helpers.tsx#getMuscleGroupKey"]={docgenInfo:helpers_getMuscleGroupKey.__docgenInfo,name:"getMuscleGroupKey",path:"src/helpers.tsx#getMuscleGroupKey"})}catch(__react_docgen_typescript_loader_error){}try{helpers_getPosition.displayName="getPosition",helpers_getPosition.__docgenInfo={description:"",displayName:"getPosition",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/helpers.tsx#getPosition"]={docgenInfo:helpers_getPosition.__docgenInfo,name:"getPosition",path:"src/helpers.tsx#getPosition"})}catch(__react_docgen_typescript_loader_error){}try{animateInjuryOuterRing.displayName="animateInjuryOuterRing",animateInjuryOuterRing.__docgenInfo={description:"",displayName:"animateInjuryOuterRing",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/helpers.tsx#animateInjuryOuterRing"]={docgenInfo:animateInjuryOuterRing.__docgenInfo,name:"animateInjuryOuterRing",path:"src/helpers.tsx#animateInjuryOuterRing"})}catch(__react_docgen_typescript_loader_error){}try{animateInjuryInnerRing.displayName="animateInjuryInnerRing",animateInjuryInnerRing.__docgenInfo={description:"",displayName:"animateInjuryInnerRing",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/helpers.tsx#animateInjuryInnerRing"]={docgenInfo:animateInjuryInnerRing.__docgenInfo,name:"animateInjuryInnerRing",path:"src/helpers.tsx#animateInjuryInnerRing"})}catch(__react_docgen_typescript_loader_error){}try{isNegative.displayName="isNegative",isNegative.__docgenInfo={description:"",displayName:"isNegative",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/helpers.tsx#isNegative"]={docgenInfo:isNegative.__docgenInfo,name:"isNegative",path:"src/helpers.tsx#isNegative"})}catch(__react_docgen_typescript_loader_error){}try{capitalizeFirstLetter.displayName="capitalizeFirstLetter",capitalizeFirstLetter.__docgenInfo={description:"",displayName:"capitalizeFirstLetter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/helpers.tsx#capitalizeFirstLetter"]={docgenInfo:capitalizeFirstLetter.__docgenInfo,name:"capitalizeFirstLetter",path:"src/helpers.tsx#capitalizeFirstLetter"})}catch(__react_docgen_typescript_loader_error){}try{helpers_getInjuryCoordinates.displayName="getInjuryCoordinates",helpers_getInjuryCoordinates.__docgenInfo={description:"",displayName:"getInjuryCoordinates",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/helpers.tsx#getInjuryCoordinates"]={docgenInfo:helpers_getInjuryCoordinates.__docgenInfo,name:"getInjuryCoordinates",path:"src/helpers.tsx#getInjuryCoordinates"})}catch(__react_docgen_typescript_loader_error){}var Line=__webpack_require__(870),Text=__webpack_require__(872),jsx_runtime=__webpack_require__(30),TextLines_TextLines=function TextLines(_ref){var _data$position2,_data$position3,_data$position4,_getInjuryCoordinates2,_data$position5,_data$position6,_data$position7,_data$position8,_getInjuryCoordinates3,_data$position9,clickedItem=_ref.clickedItem,meshes=_ref.meshes,_ref$type=_ref.type,type=void 0===_ref$type?"":_ref$type,isFrontView=_ref.isFrontView,lineRef=Object(react.useRef)(null),textRef=Object(react.useRef)(null),isInjury="injury"===type,_useState=Object(react.useState)({data:void 0,name:""}),_useState2=Object(slicedToArray.a)(_useState,2),mesh=_useState2[0],setMesh=_useState2[1],data=mesh.data,name=mesh.name,_useState3=Object(react.useState)(void 0),_useState4=Object(slicedToArray.a)(_useState3,2),scale=_useState4[0],setScale=_useState4[1],_useState5=Object(react.useState)([new three_module.Vector3(0),new three_module.Vector3(0)]),_useState6=Object(slicedToArray.a)(_useState5,2),linePoints=_useState6[0],setLinePoints=_useState6[1];return Object(react.useEffect)((function(){var _getTextLineMesh=function getTextLineMesh(clickedItem,meshes,isInjury){if(clickedItem){var newItem="",matchedMesh=meshes&&Object.fromEntries(Object.entries(meshes).filter((function(_ref){var _clickedItem$split,_newItem,key=Object(slicedToArray.a)(_ref,1)[0],newKey=null==key?void 0:key.split("_")[(null==key?void 0:key.split("_").length)-1];newItem=null==clickedItem||null===(_clickedItem$split=clickedItem.split("_"))||void 0===_clickedItem$split?void 0:_clickedItem$split[0];var muscleArray=MuscleCollection[String(helpers_getMuscleGroupKey(newItem))];return isInjury?null===(_newItem=newItem)||void 0===_newItem?void 0:_newItem.includes(newKey):null==muscleArray?void 0:muscleArray.includes(newKey)}))),tempMesh=matchedMesh[matchedMesh&&Object.keys(matchedMesh)[0]];return{data:Object(objectSpread2.a)(Object(objectSpread2.a)({},tempMesh),{},{position:tempMesh&&helpers_getPosition(tempMesh)}),name:isInjury?newItem:MuscleGroup[String(helpers_getMuscleGroupKey(newItem))]}}return{data:void 0,name:""}}(clickedItem,meshes,isInjury),data=_getTextLineMesh.data,name=_getTextLineMesh.name;setMesh({data:data,name:name})}),[clickedItem,isInjury,meshes]),Object(react.useEffect)((function(){var _lineRef$current,_textRef$current;if(isInjury){var points=helpers_getInjuryCoordinates(name).points;setLinePoints(points)}else if((null==lineRef||null===(_lineRef$current=lineRef.current)||void 0===_lineRef$current?void 0:_lineRef$current.position)&&(null==textRef||null===(_textRef$current=textRef.current)||void 0===_textRef$current?void 0:_textRef$current.position)){var _lineRef$current2,_textRef$current2,_data$position,linePosition=null==lineRef||null===(_lineRef$current2=lineRef.current)||void 0===_lineRef$current2?void 0:_lineRef$current2.position,textPosition=null==textRef||null===(_textRef$current2=textRef.current)||void 0===_textRef$current2?void 0:_textRef$current2.position,distance=(null==linePosition?void 0:linePosition.distanceTo(textPosition))-10;if(isNaN(distance))return;setLinePoints([new three_module.Vector3(0),new three_module.Vector3(isNegative(null==data||null===(_data$position=data.position)||void 0===_data$position?void 0:_data$position.x)?-distance:distance)])}}),[lineRef,textRef,data,isInjury,name]),Object(react.useEffect)((function(){var _data$scale,_data$scale2,_data$scale3,_data$scale4,_data$scale5,_data$scale6,_data$scale7,_data$scale8;isInjury?setScale(new three_module.Vector3(isFrontView?5*(null==data||null===(_data$scale=data.scale)||void 0===_data$scale?void 0:_data$scale.x):5*-(null==data||null===(_data$scale2=data.scale)||void 0===_data$scale2?void 0:_data$scale2.x),5*(null==data||null===(_data$scale3=data.scale)||void 0===_data$scale3?void 0:_data$scale3.y),5*(null==data||null===(_data$scale4=data.scale)||void 0===_data$scale4?void 0:_data$scale4.z))):setScale(new three_module.Vector3(isFrontView?null==data||null===(_data$scale5=data.scale)||void 0===_data$scale5?void 0:_data$scale5.x:-(null==data||null===(_data$scale6=data.scale)||void 0===_data$scale6?void 0:_data$scale6.x),null==data||null===(_data$scale7=data.scale)||void 0===_data$scale7?void 0:_data$scale7.y,null==data||null===(_data$scale8=data.scale)||void 0===_data$scale8?void 0:_data$scale8.z))}),[lineRef,textRef,data,isInjury,name,isFrontView]),clickedItem?clickedItem&&""!==name&&Object(jsx_runtime.jsxs)("group",{children:[Object(jsx_runtime.jsx)(Line.a,{ref:lineRef,color:Colors.blueRibbon,lineWidth:.5,points:linePoints,position:new three_module.Vector3(null==data||null===(_data$position2=data.position)||void 0===_data$position2?void 0:_data$position2.x,isFrontView?(null==data||null===(_data$position3=data.position)||void 0===_data$position3?void 0:_data$position3.y)+10:(null==data||null===(_data$position4=data.position)||void 0===_data$position4?void 0:_data$position4.y)-10,isInjury?null===(_getInjuryCoordinates2=helpers_getInjuryCoordinates(name))||void 0===_getInjuryCoordinates2?void 0:_getInjuryCoordinates2.z:null==data||null===(_data$position5=data.position)||void 0===_data$position5?void 0:_data$position5.z)}),Object(jsx_runtime.jsx)(Text.a,{ref:textRef,font:"",fontSize:.55,color:Colors.blueRibbon,children:capitalizeFirstLetter(name),scale:scale,position:new three_module.Vector3(isNegative(null==data||null===(_data$position6=data.position)||void 0===_data$position6?void 0:_data$position6.x)?-100:100,isFrontView?(null==data||null===(_data$position7=data.position)||void 0===_data$position7?void 0:_data$position7.y)+10:(null==data||null===(_data$position8=data.position)||void 0===_data$position8?void 0:_data$position8.y)-10,isInjury?null===(_getInjuryCoordinates3=helpers_getInjuryCoordinates(name))||void 0===_getInjuryCoordinates3?void 0:_getInjuryCoordinates3.z:null==data||null===(_data$position9=data.position)||void 0===_data$position9?void 0:_data$position9.z),rotation:new three_module.Euler(80.1,0,0)})]}):null};try{TextLines_TextLines.displayName="TextLines",TextLines_TextLines.__docgenInfo={description:"",displayName:"TextLines",props:{clickedItem:{defaultValue:null,description:"",name:"clickedItem",required:!0,type:{name:"any"}},meshes:{defaultValue:null,description:"",name:"meshes",required:!0,type:{name:"any"}},type:{defaultValue:{value:""},description:"",name:"type",required:!1,type:{name:"string"}},isFrontView:{defaultValue:null,description:"",name:"isFrontView",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/TextLines.tsx#TextLines"]={docgenInfo:TextLines_TextLines.__docgenInfo,name:"TextLines",path:"src/components/TextLines.tsx#TextLines"})}catch(__react_docgen_typescript_loader_error){}var MuscleMeshes_MuscleMeshes=function MuscleMeshes(_ref){var activeMuscles=_ref.activeMuscles,nodes=_ref.nodes,isFrontView=_ref.isFrontView,onMuscleGroupClick=_ref.onMuscleGroupClick,meshRef=Object(react.useRef)(null),_useState=Object(react.useState)([]),_useState2=Object(slicedToArray.a)(_useState,2),clickedGroup=_useState2[0],setClickedGroup=_useState2[1],_useState3=Object(react.useState)([]),_useState4=Object(slicedToArray.a)(_useState3,2),hovered=_useState4[0],setHovered=_useState4[1],_useState5=Object(react.useState)(""),_useState6=Object(slicedToArray.a)(_useState5,2),clickedMuscle=_useState6[0],setClickedMuscle=_useState6[1],meshes=Object(react.useMemo)((function(){return Object.fromEntries(Object.entries(nodes).filter((function(_ref2){var _value$parent,_value$parent$name,value=Object(slicedToArray.a)(_ref2,2)[1];return!(null==value||null===(_value$parent=value.parent)||void 0===_value$parent||null===(_value$parent$name=_value$parent.name)||void 0===_value$parent$name?void 0:_value$parent$name.includes("textLine"))})).filter((function(_ref4){var _value$parent2,_value$parent2$name,value=Object(slicedToArray.a)(_ref4,2)[1];return!(null==value||null===(_value$parent2=value.parent)||void 0===_value$parent2||null===(_value$parent2$name=_value$parent2.name)||void 0===_value$parent2$name?void 0:_value$parent2$name.includes("injury"))})))}),[nodes]),textMeshes=Object(react.useMemo)((function(){return Object.fromEntries(Object.entries(nodes).filter((function(_ref6){return Object(slicedToArray.a)(_ref6,1)[0].includes(isFrontView?"_f_":"_b_")})).filter((function(_ref8){var _value$parent3,_value$parent3$name,value=Object(slicedToArray.a)(_ref8,2)[1];return null==value||null===(_value$parent3=value.parent)||void 0===_value$parent3||null===(_value$parent3$name=_value$parent3.name)||void 0===_value$parent3$name?void 0:_value$parent3$name.includes("textLine")})).filter((function(_ref10){var value=Object(slicedToArray.a)(_ref10,2)[1];return"Mesh"===(null==value?void 0:value.type)})))}),[nodes,isFrontView]),onHover=Object(react.useCallback)((function(e){e.stopPropagation(),setHovered(MuscleCollection[String(helpers_getMuscleGroupKey(e.object.name))])}),[setHovered]),onLeave=Object(react.useCallback)((function(e){e.stopPropagation(),setHovered([]),setClickedMuscle("")}),[setHovered,setClickedMuscle]),onClick=Object(react.useCallback)((function(e){e.stopPropagation(),setClickedMuscle(e.object.name);var muscleGroup=MuscleCollection[String(helpers_getMuscleGroupKey(e.object.name))];if(muscleGroup){var newArray=Object(toConsumableArray.a)(clickedGroup);newArray=(null==clickedGroup?void 0:clickedGroup.includes(e.object.name))?newArray.filter((function(item){return!(null==muscleGroup?void 0:muscleGroup.includes(item))})):[].concat(Object(toConsumableArray.a)(newArray),Object(toConsumableArray.a)(muscleGroup)),setClickedGroup(newArray)}onMuscleGroupClick&&onMuscleGroupClick(e.object.name)}),[clickedGroup,setClickedGroup,onMuscleGroupClick,setClickedMuscle]);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object.entries(meshes).map((function(_ref12,index){var _value$name,_ref13=Object(slicedToArray.a)(_ref12,2),key=_ref13[0],value=_ref13[1];return Object(jsx_runtime.jsx)("mesh",Object(objectSpread2.a)(Object(objectSpread2.a)({castShadow:!0,receiveShadow:!0,ref:meshRef,onPointerEnter:onHover,onPointerLeave:onLeave,onClick:onClick,position:(null==value||null===(_value$name=value.name)||void 0===_value$name?void 0:_value$name.includes("injury"))?helpers_getPosition(value):null==value?void 0:value.position},value),{},{children:Object(jsx_runtime.jsx)("meshPhysicalMaterial",{color:helpers_getHighlightColor(value.name,clickedGroup,hovered,activeMuscles)})}),"".concat(null==value?void 0:value.id,"_").concat(key,"_").concat(index))})),Object(jsx_runtime.jsx)(TextLines_TextLines,{clickedItem:clickedMuscle,meshes:textMeshes,isFrontView:isFrontView})]})};try{MuscleMeshes_MuscleMeshes.displayName="MuscleMeshes",MuscleMeshes_MuscleMeshes.__docgenInfo={description:"",displayName:"MuscleMeshes",props:{activeMuscles:{defaultValue:null,description:"",name:"activeMuscles",required:!0,type:{name:"[{ name: string; stimulation: string; }]"}},nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"any"}},isFrontView:{defaultValue:null,description:"",name:"isFrontView",required:!0,type:{name:"boolean"}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MuscleMeshes.tsx#MuscleMeshes"]={docgenInfo:MuscleMeshes_MuscleMeshes.__docgenInfo,name:"MuscleMeshes",path:"src/components/MuscleMeshes.tsx#MuscleMeshes"})}catch(__react_docgen_typescript_loader_error){}var InjuryMeshes_InjuryMeshes=function InjuryMeshes(_ref){var nodes=_ref.nodes,createdInjuries=_ref.createdInjuries,injuries=_ref.injuries,isFrontView=_ref.isFrontView,onMuscleGroupClick=_ref.onMuscleGroupClick,ref=Object(react.useRef)(),scene=Object(react_three_fiber_esm.d)().scene,_useState=Object(react.useState)(""),_useState2=Object(slicedToArray.a)(_useState,2),clickedInjury=_useState2[0],setClickedInjury=_useState2[1],injuryPlaceholders=Object(react.useMemo)((function(){return Object.fromEntries(Object.entries(nodes).filter((function(_ref2){return Object(slicedToArray.a)(_ref2,1)[0].includes(isFrontView?"_f_":"_b_")})).filter((function(_ref4){var _value$parent,_value$parent$name,value=Object(slicedToArray.a)(_ref4,2)[1];return null==value||null===(_value$parent=value.parent)||void 0===_value$parent||null===(_value$parent$name=_value$parent.name)||void 0===_value$parent$name?void 0:_value$parent$name.includes("injury")})).filter((function(_ref6){var key=Object(slicedToArray.a)(_ref6,1)[0];return injuries.some((function(i){return i.location===(null==key?void 0:key.split("_")[(null==key?void 0:key.split("_").length)-1])}))})))}),[nodes,isFrontView,injuries]);Object(react.useEffect)((function(){for(;scene.children.length>1;)scene.remove(scene.children[1]);var injuriesGroup=new three_module.Group;injuriesGroup.name="injuries",scene.add(injuriesGroup);for(var _i=0,_Object$entries=Object.entries(injuryPlaceholders);_i<_Object$entries.length;_i++){var _Object$entries$_i=Object(slicedToArray.a)(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];helpers_createInjuries(injuriesGroup,key,value)}}),[injuryPlaceholders,scene,isFrontView]);var onLeave=Object(react.useCallback)((function(e){e.stopPropagation(),setClickedInjury("")}),[setClickedInjury]),onClick=Object(react.useCallback)((function(e){e.stopPropagation();var key=e.object.name,newKey=null==key?void 0:key.split("_")[(null==key?void 0:key.split("_").length)-1];setClickedInjury(newKey),onMuscleGroupClick&&onMuscleGroupClick(e.object.name)}),[setClickedInjury,onMuscleGroupClick]);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object.entries(injuryPlaceholders).map((function(_ref8,index){var _ref9=Object(slicedToArray.a)(_ref8,2),key=_ref9[0],value=_ref9[1];return Object(jsx_runtime.jsx)("mesh",Object(objectSpread2.a)(Object(objectSpread2.a)({ref:ref,onClick:onClick,onPointerLeave:onLeave,name:"injury_".concat(key),userData:{injury:key},position:helpers_getPosition(value)},value),{},{children:Object(jsx_runtime.jsx)("meshStandardMaterial",{attach:"material",transparent:!0,opacity:0})}),"".concat(null==value?void 0:value.id,"_").concat(key,"_").concat(index))})),Object(jsx_runtime.jsx)(TextLines_TextLines,{clickedItem:clickedInjury,meshes:createdInjuries,isFrontView:isFrontView,type:"injury"})]})};try{InjuryMeshes_InjuryMeshes.displayName="InjuryMeshes",InjuryMeshes_InjuryMeshes.__docgenInfo={description:"",displayName:"InjuryMeshes",props:{nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"any"}},createdInjuries:{defaultValue:null,description:"",name:"createdInjuries",required:!0,type:{name:"any"}},injuries:{defaultValue:null,description:"",name:"injuries",required:!0,type:{name:"any"}},isFrontView:{defaultValue:null,description:"",name:"isFrontView",required:!0,type:{name:"boolean"}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/InjuryMeshes.tsx#InjuryMeshes"]={docgenInfo:InjuryMeshes_InjuryMeshes.__docgenInfo,name:"InjuryMeshes",path:"src/components/InjuryMeshes.tsx#InjuryMeshes"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["muscleGroups","injuries","rotation","source"],Model_Model=function Model(_ref){var muscleGroups=_ref.muscleGroups,injuries=_ref.injuries,rotation=_ref.rotation,source=_ref.source,props=Object(objectWithoutProperties.a)(_ref,_excluded),nodes=Object(useGLTF.a)(source).nodes,scene=Object(react_three_fiber_esm.d)().scene,_useState=Object(react.useState)({}),_useState2=Object(slicedToArray.a)(_useState,2),createdInjuries=_useState2[0],setCreatedInjuries=_useState2[1],isFrontView=Object(react.useMemo)((function(){return"non"===rotation}),[rotation]);return Object(react.useEffect)((function(){var _scene$children$filte,_scene$children$filte2,_scene$children$filte3,meshes=null===(_scene$children$filte=scene.children.filter((function(group){return"injuries"===group.name})))||void 0===_scene$children$filte||null===(_scene$children$filte2=_scene$children$filte[0])||void 0===_scene$children$filte2||null===(_scene$children$filte3=_scene$children$filte2.children)||void 0===_scene$children$filte3?void 0:_scene$children$filte3.reduce((function(acc,curr){return"main"===curr.userData.type&&(acc[curr.name]=curr),acc}),{});setCreatedInjuries(meshes)}),[isFrontView,scene.children]),Object(react_three_fiber_esm.b)((function(){scene.traverse((function(obj){animateInjuryOuterRing(obj),animateInjuryInnerRing(obj)}))})),Object(jsx_runtime.jsx)("group",{dispose:null,children:Object(jsx_runtime.jsxs)("group",{position:[1.22,0,0],rotation:[Math.PI/2,0,isFrontView?0:15.7],scale:[.01,.01,.01],children:[Object(jsx_runtime.jsx)(MuscleMeshes_MuscleMeshes,Object(objectSpread2.a)({activeMuscles:muscleGroups,nodes:nodes,isFrontView:isFrontView},props)),Object(jsx_runtime.jsx)(InjuryMeshes_InjuryMeshes,Object(objectSpread2.a)({nodes:nodes,createdInjuries:createdInjuries,injuries:injuries,isFrontView:isFrontView},props))]})})};try{Model_Model.displayName="Model",Model_Model.__docgenInfo={description:"",displayName:"Model",props:{muscleGroups:{defaultValue:null,description:"",name:"muscleGroups",required:!0,type:{name:"[{ name: string; stimulation: Stimulation; }]"}},injuries:{defaultValue:null,description:"",name:"injuries",required:!1,type:{name:"InjuryVisualization[]"}},rotation:{defaultValue:null,description:"",name:"rotation",required:!1,type:{name:"enum",value:[{value:'"non"'},{value:"180"}]}},source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"string"}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Model.tsx#Model"]={docgenInfo:Model_Model.__docgenInfo,name:"Model",path:"src/components/Model.tsx#Model"})}catch(__react_docgen_typescript_loader_error){}var useProgress=__webpack_require__(868),Html=__webpack_require__(869),Loader_Loader=function Loader(){var progress=Object(useProgress.a)().progress;return Object(jsx_runtime.jsxs)(Html.a,{center:!0,children:[progress," % loaded"]})},AnatomyVisualization_excluded=["gender","muscleGroups"],AnatomyVisualization_AnatomyVisualization=function AnatomyVisualization(_ref){_ref.gender;var muscleGroups=_ref.muscleGroups,props=Object(objectWithoutProperties.a)(_ref,AnatomyVisualization_excluded),mappedMuscleGroups=Object(react.useMemo)((function(){return muscleGroups.reduce((function(accumulator,currentValue){return MuscleCollection[currentValue.name].map((function(item){return accumulator.push({name:item,stimulation:currentValue.stimulation})})),accumulator}),[])}),[muscleGroups]),ref=Object(react.useRef)(null);return Object(jsx_runtime.jsx)(react.Suspense,{fallback:Object(jsx_runtime.jsx)(Loader_Loader,{}),children:Object(jsx_runtime.jsx)(Stage.a,{controls:ref,adjustCamera:!0,intensity:1,environment:"city",preset:"rembrandt",children:Object(jsx_runtime.jsx)(Model_Model,Object(objectSpread2.a)({source:"./assets/nonBinary_14.glb",muscleGroups:mappedMuscleGroups},props))})})};try{AnatomyVisualization_AnatomyVisualization.displayName="AnatomyVisualization",AnatomyVisualization_AnatomyVisualization.__docgenInfo={description:"",displayName:"AnatomyVisualization",props:{gender:{defaultValue:null,description:"",name:"gender",required:!1,type:{name:"enum",value:[{value:'"non-binary"'},{value:'"female"'},{value:'"male"'}]}},muscleGroups:{defaultValue:null,description:"",name:"muscleGroups",required:!0,type:{name:"MuscleGroupVisualization[]"}},injuries:{defaultValue:null,description:"",name:"injuries",required:!1,type:{name:"InjuryVisualization[]"}},rotation:{defaultValue:null,description:"",name:"rotation",required:!1,type:{name:"enum",value:[{value:'"non"'},{value:"180"}]}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/AnatomyVisualization.tsx#AnatomyVisualization"]={docgenInfo:AnatomyVisualization_AnatomyVisualization.__docgenInfo,name:"AnatomyVisualization",path:"src/components/AnatomyVisualization.tsx#AnatomyVisualization"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Anatomy Visualization",component:AnatomyVisualization_AnatomyVisualization,argTypes:{rotation:{options:["non",180],control:{type:"radio"}}}};var ModelScene=function Model(args){return Object(jsx_runtime.jsx)(react_three_fiber_esm.a,{dpr:[2,4],style:{width:window.innerWidth,height:window.innerHeight},camera:{fov:50},children:Object(jsx_runtime.jsx)(AnatomyVisualization_AnatomyVisualization,Object(objectSpread2.a)({gender:"non-binary",muscleGroups:[{name:"Calves",stimulation:"low"},{name:"TibialisAnterior",stimulation:"medium"},{name:"ErectorSpinae",stimulation:"high"},{name:"Chest",stimulation:"dangerous"}],injuries:[]},args))})}.bind({});ModelScene.args={gender:"non-binary",rotation:"non",muscleGroups:[{name:"Calves",stimulation:"low"},{name:"TibialisAnterior",stimulation:"medium"},{name:"ErectorSpinae",stimulation:"high"},{name:"Chest",stimulation:"dangerous"}],injuries:[{location:Injury.Shoulder},{location:Injury.Abs},{location:Injury.Wrist},{location:Injury.Knee},{location:Injury.LowerBack}]},ModelScene.parameters=Object(objectSpread2.a)({storySource:{source:"(args: any) => (\n  <Canvas\n    dpr={[2, 4]}\n    style={{ width: window.innerWidth, height: window.innerHeight }}\n    camera={{ fov: 50 }}\n  >\n    <AnatomyVisualization\n      gender={'non-binary'}\n      muscleGroups={[\n        {\n          name: 'Calves',\n          stimulation: 'low',\n        },\n        {\n          name: 'TibialisAnterior',\n          stimulation: 'medium',\n        },\n        {\n          name: 'ErectorSpinae',\n          stimulation: 'high',\n        },\n        {\n          name: 'Chest',\n          stimulation: 'dangerous',\n        },\n      ]}\n      injuries={[]}\n      {...args}\n    />\n  </Canvas>\n)"}},ModelScene.parameters)},861:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));var client_api=__webpack_require__(874),esm=__webpack_require__(5),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},layout:"centered"};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))}},[[492,2,3]]]);