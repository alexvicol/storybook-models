(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{496:function(module,exports,__webpack_require__){__webpack_require__(497),__webpack_require__(653),__webpack_require__(654),__webpack_require__(855),__webpack_require__(856),__webpack_require__(862),__webpack_require__(863),__webpack_require__(861),__webpack_require__(858),__webpack_require__(864),__webpack_require__(859),__webpack_require__(860),__webpack_require__(865),module.exports=__webpack_require__(850)},563:function(module,exports){},654:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(362)},850:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(362).configure)([__webpack_require__(851),__webpack_require__(852)],module,!1)}).call(this,__webpack_require__(173)(module))},851:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=851},852:function(module,exports,__webpack_require__){var map={"./stories/Model.stories.tsx":857};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=852},857:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ModelScene",(function(){return ModelScene}));var MuscleGroup,Injury,objectSpread2=__webpack_require__(44),react_three_fiber_esm=__webpack_require__(34),objectWithoutProperties=__webpack_require__(150),react=__webpack_require__(0),Stage=__webpack_require__(875),useGLTF=__webpack_require__(877),toConsumableArray=__webpack_require__(116),slicedToArray=__webpack_require__(117);!function(MuscleGroup){MuscleGroup.Forearms="Forearms",MuscleGroup.Biceps="Biceps",MuscleGroup.Triceps="Triceps",MuscleGroup.Deltoid="Deltoid",MuscleGroup.Chest="Chest",MuscleGroup.Neck="Neck",MuscleGroup.Trapezius="Trapezius",MuscleGroup.Rhomboid="Rhomboid",MuscleGroup.UpperBack="Upper Back",MuscleGroup.ErectorSpinae="Erector Spinae",MuscleGroup.LatissimusDorsi="Latissimus Dorsi",MuscleGroup.Abdominis="Abdominis",MuscleGroup.Obliques="Obliques",MuscleGroup.Quadriceps="Quadriceps",MuscleGroup.Gluteus="Gluteus",MuscleGroup.Hamstrings="Hamstrings",MuscleGroup.HipFlexors="Hip Flexors",MuscleGroup.Adductors="Adductors",MuscleGroup.Abductors="Abductors",MuscleGroup.Calves="Calves",MuscleGroup.TibialisAnterior="Tibialis Anterior"}(MuscleGroup||(MuscleGroup={})),function(Injury){Injury.Shoulder="shoulder",Injury.Abs="abs",Injury.Wrist="wrist",Injury.Knee="knee",Injury.Elbow="elbow",Injury.Back="upperBack",Injury.LowerBack="lowerBack"}(Injury||(Injury={}));var MuscleCollection=Object.freeze({Forearms:["forarm1_l","forarm2_l","forarm3_l","forarm1_r","forarm1_b_r","forarm2_b_r","forarm1_b_l","forarm2_b_l","forarm2_r","forarm3_r","forearms"],Biceps:["biceps_l","biceps_r","biceps"],Triceps:["triceps_l","triceps_r","triceps"],Deltoid:["deltoid_b_l","deltoid_b_r","deltoid_f_l","deltoid_f_r","deltoid"],Chest:["chest_l","chest_r","chest"],Neck:["neckF","neck","neck_f2"],Trapezius:["trapecius_f","trapecius_b","trapezius","trapecius_b_l","trapecius_b_r"],Rhomboid:["rhombopid_l","rhombopid_r","rhomboid"],ErectorSpinae:["erectorSpinae"],LatissimusDorsi:["latisimusDorsi_b_l","latisimusDorsi_b_r","latisimusDorsi_l","latisimusDorsi_r","latimusDorsi","latisimusDorsi_l1"],Abdominis:["abdonimis1_l","abdonimis1_r","abdonimis2_l","abdonimis2_r","abdonimis3_l","abdonimis3_r","abdonimis4_l","abdonimis4_r","abdonimis"],Obliques:["obliques_l","obliques_r","obliques_l","obliques_l1","obliques_r","obliques"],Quadriceps:["quadriceps_l","quadriceps_r","quadriceps_r1","qudriceps"],Gluteus:["gluteus_l","gluteus_r","gluteus"],Hamstrings:["hamstring_l","hamstring_r","hamstrings"],HipFlexors:["hipFlexor_l","hipFlexor_r"],Abductors:["abducter_l","abducter_l1","abducter_r","abducter_r2","abducter_r4","abducter_r001","abducter_l001","abducters"],Adductors:["adducter_l","adducter_r"],Calves:["calves1_b_l","calves2_b_l","calves1_b_r","calves2_b_r","calves1_f_l","calves2_f_r1","calves3_f_l","calves1_f_r","calves2_f_r","calves3_f_r","calves2_f_l","calves","calves3_f_l1"],TibialisAnterior:["tibialisAnterior_l","tibialisAnterior_r","tibialisAnterior","tibialisAnterior_l001"]}),Colors=Object.freeze({lowStimulation:"#9fb0ff",mediumStimulation:"#466cce",highStimulation:"#1c3c88",grey:"#525661",lightGrey:"#D6DCE8",white:"#FFFFFF",blueRibbon:"#005FFF",lightBlue:"#718cff"}),three_module=__webpack_require__(1),isNegative=function isNegative(number){return number<0},capitalizeFirstLetter=function capitalizeFirstLetter(string){var _string$charAt;return(null==string||null===(_string$charAt=string.charAt(0))||void 0===_string$charAt?void 0:_string$charAt.toUpperCase())+(null==string?void 0:string.slice(1))},helpers_getPosition=function getPosition(obj){var boundingBox=(new three_module.Box3).setFromObject(obj),center=new three_module.Vector3;return boundingBox.getCenter(center),center},helpers_getScale=function getScale(scaleValues,isInjury,isFrontView){if(scaleValues){var x=scaleValues.x,y=scaleValues.y,z=scaleValues.z;return isInjury?new three_module.Vector3(isFrontView?5*x:5*-x,5*y,5*z):new three_module.Vector3(isFrontView?x:-x,y,z)}},helpers_getMuscleGroupKey=function getMuscleGroupKey(muscleName){return Object.keys(MuscleCollection).filter((function(item){return MuscleCollection[item].some((function(e){return e.includes(muscleName)}))}))},helpers_getMeshColor=function getMeshColor(name,clickedGroup,hovered,activeMuscles){var _activeMuscles$filter,stimulation=null===(_activeMuscles$filter=activeMuscles.filter((function(e){return e.name===name}))[0])||void 0===_activeMuscles$filter?void 0:_activeMuscles$filter.stimulation;return name.includes("sweep")||name.includes("outline")?Colors.white:(null==hovered?void 0:hovered.includes(name))?Colors.lightBlue:(null==clickedGroup?void 0:clickedGroup.includes(name))?Colors.grey:"low"===stimulation?Colors.lowStimulation:"medium"===stimulation?Colors.mediumStimulation:"high"===stimulation?Colors.highStimulation:"dangerous"===stimulation?"blue":Colors.lightGrey},helpers_createInjuries=function createInjuries(group,key,value){var placeholderPosition=helpers_getPosition(value),newKey=null==key?void 0:key.split("_")[(null==key?void 0:key.split("_").length)-1],name="injury_".concat(newKey),geometry=new three_module.CircleGeometry(.02,32),geometryOuter=new three_module.CircleGeometry(.045,32),injuryCross=new three_module.Mesh(geometry,new three_module.MeshStandardMaterial({map:(new three_module.TextureLoader).load("./assets/injuryCross.png")})),fadeMaterial=new three_module.MeshStandardMaterial({color:"#FF0031",transparent:!0,opacity:1}),injuryOuter=new three_module.Mesh(geometryOuter,new three_module.MeshStandardMaterial({color:16777215,opacity:1})),injuryFade=new three_module.Mesh(geometryOuter,fadeMaterial),injuryFadeDelayed=new three_module.Mesh(geometryOuter,fadeMaterial);injuryCross.name=name,injuryOuter.name=name,injuryFade.name=name,injuryFadeDelayed.name=name,injuryCross.userData={injury:name,type:"main"},injuryOuter.userData={injury:name,type:"backdrop"},injuryFade.userData={injury:name,type:"fade"},injuryFadeDelayed.userData={injury:name,type:"fade-delayed"},injuryCross.position.set(isNegative(placeholderPosition.x)?placeholderPosition.x:-placeholderPosition.x,placeholderPosition.y,.184),injuryOuter.position.set(isNegative(placeholderPosition.x)?placeholderPosition.x:-placeholderPosition.x,placeholderPosition.y,.183),injuryFade.position.set(isNegative(placeholderPosition.x)?placeholderPosition.x:-placeholderPosition.x,placeholderPosition.y,.18),injuryFadeDelayed.position.set(isNegative(placeholderPosition.x)?placeholderPosition.x:-placeholderPosition.x,placeholderPosition.y,.184),group.add(injuryCross),group.add(injuryOuter),group.add(injuryFade),group.add(injuryFadeDelayed)},animateInjuryOuterRing=function animateInjuryOuterRing(obj){var _obj$userData;if("fade"===(null===(_obj$userData=obj.userData)||void 0===_obj$userData?void 0:_obj$userData.type)){var fadeAnimation=obj;obj.scale.x>=4&&(obj.scale.set(.1,.1,0),fadeAnimation.material.opacity=1),obj.scale.set(obj.scale.x+.03,obj.scale.y+.03,obj.scale.z+2),fadeAnimation.material.opacity-=.01}},animateInjuryInnerRing=function animateInjuryInnerRing(obj){var _obj$userData2;if("fade-delayed"===(null===(_obj$userData2=obj.userData)||void 0===_obj$userData2?void 0:_obj$userData2.type)){var fadeAnimation=obj;obj.scale.x>=4&&(obj.scale.set(.1,.1,0),fadeAnimation.material.opacity=1),obj.scale.set(obj.scale.x+.03,obj.scale.y+.03,obj.scale.z+2),fadeAnimation.material.opacity-=.01}};try{isNegative.displayName="isNegative",isNegative.__docgenInfo={description:"",displayName:"isNegative",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/helpers.tsx#isNegative"]={docgenInfo:isNegative.__docgenInfo,name:"isNegative",path:"src/utils/helpers.tsx#isNegative"})}catch(__react_docgen_typescript_loader_error){}try{capitalizeFirstLetter.displayName="capitalizeFirstLetter",capitalizeFirstLetter.__docgenInfo={description:"",displayName:"capitalizeFirstLetter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/helpers.tsx#capitalizeFirstLetter"]={docgenInfo:capitalizeFirstLetter.__docgenInfo,name:"capitalizeFirstLetter",path:"src/utils/helpers.tsx#capitalizeFirstLetter"})}catch(__react_docgen_typescript_loader_error){}try{helpers_getPosition.displayName="getPosition",helpers_getPosition.__docgenInfo={description:"",displayName:"getPosition",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/helpers.tsx#getPosition"]={docgenInfo:helpers_getPosition.__docgenInfo,name:"getPosition",path:"src/utils/helpers.tsx#getPosition"})}catch(__react_docgen_typescript_loader_error){}try{helpers_getMuscleGroupKey.displayName="getMuscleGroupKey",helpers_getMuscleGroupKey.__docgenInfo={description:"",displayName:"getMuscleGroupKey",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/helpers.tsx#getMuscleGroupKey"]={docgenInfo:helpers_getMuscleGroupKey.__docgenInfo,name:"getMuscleGroupKey",path:"src/utils/helpers.tsx#getMuscleGroupKey"})}catch(__react_docgen_typescript_loader_error){}try{animateInjuryOuterRing.displayName="animateInjuryOuterRing",animateInjuryOuterRing.__docgenInfo={description:"",displayName:"animateInjuryOuterRing",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/helpers.tsx#animateInjuryOuterRing"]={docgenInfo:animateInjuryOuterRing.__docgenInfo,name:"animateInjuryOuterRing",path:"src/utils/helpers.tsx#animateInjuryOuterRing"})}catch(__react_docgen_typescript_loader_error){}try{animateInjuryInnerRing.displayName="animateInjuryInnerRing",animateInjuryInnerRing.__docgenInfo={description:"",displayName:"animateInjuryInnerRing",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/helpers.tsx#animateInjuryInnerRing"]={docgenInfo:animateInjuryInnerRing.__docgenInfo,name:"animateInjuryInnerRing",path:"src/utils/helpers.tsx#animateInjuryInnerRing"})}catch(__react_docgen_typescript_loader_error){}var Line=__webpack_require__(874),Text=__webpack_require__(876);var jsx_runtime=__webpack_require__(27),text_lines_TextLines=function TextLines(_ref){var _values$position,_values$position2,_values$position3,_values$position4,_values$position5,_values$position6,_values$position7,_values$position8,clickedItem=_ref.clickedItem,meshes=_ref.meshes,_ref$isInjury=_ref.isInjury,isInjury=void 0!==_ref$isInjury&&_ref$isInjury,isFrontView=_ref.isFrontView,gender=_ref.gender,lineRef=Object(react.useRef)(null),textRef=Object(react.useRef)(null),_useMemo=Object(react.useMemo)((function(){return function getMeshTextLine(clickedItem,meshes,isInjury){if(clickedItem){var newItem="",matchedMesh=meshes.length&&(null==meshes?void 0:meshes.filter((function(_ref){var _clickedItem$split,_newItem,name=_ref.name,newKey=null==name?void 0:name.split("_")[(null==name?void 0:name.split("_").length)-1];newItem=null==clickedItem||null===(_clickedItem$split=clickedItem.split("_"))||void 0===_clickedItem$split?void 0:_clickedItem$split[0];var muscleArray=MuscleCollection[String(helpers_getMuscleGroupKey(newItem))];return isInjury?null===(_newItem=newItem)||void 0===_newItem?void 0:_newItem.includes(newKey):null==muscleArray?void 0:muscleArray.includes(newKey)}))),matchedKey=matchedMesh&&Object.keys(matchedMesh)[0],tempMesh=null==matchedMesh?void 0:matchedMesh[matchedKey];return{values:Object(objectSpread2.a)(Object(objectSpread2.a)({},tempMesh),{},{position:tempMesh&&helpers_getPosition(tempMesh)}),name:isInjury?newItem:MuscleGroup[String(helpers_getMuscleGroupKey(newItem))]}}return{values:void 0,name:""}}(clickedItem,meshes,isInjury)}),[clickedItem,isInjury,meshes]),values=_useMemo.values,name=_useMemo.name,_useMemo2=Object(react.useMemo)((function(){return function getInjuryCoordinates(name,isFrontView,gender){if("non-binary"===gender)switch(name){case"shoulder":return{z:-142,points:[new three_module.Vector3(-24),new three_module.Vector3(-93)]};case"abs":return{z:-116,points:[new three_module.Vector3(-8),new three_module.Vector3(-95)]};case"wrist":return{z:-84,points:[new three_module.Vector3(isFrontView?-43:43),new three_module.Vector3(isFrontView?-95:95)]};case"knee":return{z:-46.5,points:[new three_module.Vector3(-17),new three_module.Vector3(-95)]};case"lowerBack":return{z:-103,points:[new three_module.Vector3(5),new three_module.Vector3(90)]};case"back":return{z:-140.5,points:[new three_module.Vector3(5),new three_module.Vector3(90)]};case"elbow":return{z:-111,points:[new three_module.Vector3(32),new three_module.Vector3(95)]};default:return{z:0,points:[new three_module.Vector3(0)]}}if("male"===gender)switch(name){case"shoulder":return{z:-142,points:[new three_module.Vector3(-24),new three_module.Vector3(-93)]};case"abs":return{z:-116,points:[new three_module.Vector3(-8),new three_module.Vector3(-95)]};case"wrist":return{z:isFrontView?-90:-87,points:[new three_module.Vector3(isFrontView?-45:45),new three_module.Vector3(isFrontView?-95:95)]};case"knee":return{z:-46.5,points:[new three_module.Vector3(-17),new three_module.Vector3(-95)]};case"lowerBack":return{z:-102,points:[new three_module.Vector3(0),new three_module.Vector3(90)]};case"back":return{z:-140.5,points:[new three_module.Vector3(5),new three_module.Vector3(90)]};case"elbow":return{z:-113,points:[new three_module.Vector3(37),new three_module.Vector3(95)]};default:return{z:0,points:[new three_module.Vector3(0)]}}if("female"===gender)switch(name){case"shoulder":return{z:-145,points:[new three_module.Vector3(-24),new three_module.Vector3(-93)]};case"abs":return{z:-121,points:[new three_module.Vector3(-8),new three_module.Vector3(-95)]};case"wrist":return{z:-91,points:[new three_module.Vector3(isFrontView?-41:41),new three_module.Vector3(isFrontView?-95:95)]};case"knee":return{z:-47,points:[new three_module.Vector3(-17),new three_module.Vector3(-95)]};case"lowerBack":return{z:-106,points:[new three_module.Vector3(5),new three_module.Vector3(90)]};case"back":return{z:-140.5,points:[new three_module.Vector3(5),new three_module.Vector3(90)]};case"elbow":return{z:-116,points:[new three_module.Vector3(32),new three_module.Vector3(95)]};default:return{z:0,points:[new three_module.Vector3(0)]}}}(name,isFrontView,gender)}),[name,isFrontView,gender]),points=_useMemo2.points,z=_useMemo2.z,_useLinePoints=function useLinePoints(_ref){var isInjury=_ref.isInjury,points=_ref.points,textRef=_ref.textRef,lineRef=_ref.lineRef,values=_ref.values,_useState=Object(react.useState)([new three_module.Vector3(0),new three_module.Vector3(0)]),_useState2=Object(slicedToArray.a)(_useState,2),linePoints=_useState2[0],setLinePoints=_useState2[1];return Object(react.useEffect)((function(){var _lineRef$current,_textRef$current;if(isInjury)setLinePoints(points);else if((null==lineRef||null===(_lineRef$current=lineRef.current)||void 0===_lineRef$current?void 0:_lineRef$current.position)&&(null==textRef||null===(_textRef$current=textRef.current)||void 0===_textRef$current?void 0:_textRef$current.position)){var _lineRef$current2,_textRef$current2,_values$position,linePosition=null==lineRef||null===(_lineRef$current2=lineRef.current)||void 0===_lineRef$current2?void 0:_lineRef$current2.position,textPosition=null==textRef||null===(_textRef$current2=textRef.current)||void 0===_textRef$current2?void 0:_textRef$current2.position,distance=(null==linePosition?void 0:linePosition.distanceTo(textPosition))-11;if(isNaN(distance))return;setLinePoints([new three_module.Vector3(0),new three_module.Vector3(isNegative(null==values||null===(_values$position=values.position)||void 0===_values$position?void 0:_values$position.x)?-distance:distance)])}}),[isInjury,lineRef,points,textRef,values]),{linePoints:linePoints}}({isInjury:isInjury,points:points,textRef:textRef,lineRef:lineRef,values:values}),linePoints=_useLinePoints.linePoints;return clickedItem||""!==name?Object(jsx_runtime.jsxs)("group",{scale:"male"===gender?[2,2,2]:[1,1,1],children:[Object(jsx_runtime.jsx)(Line.a,{ref:lineRef,color:Colors.blueRibbon,lineWidth:.5,points:linePoints,position:new three_module.Vector3(null==values||null===(_values$position=values.position)||void 0===_values$position?void 0:_values$position.x,isFrontView?(null==values||null===(_values$position2=values.position)||void 0===_values$position2?void 0:_values$position2.y)+10:(null==values||null===(_values$position3=values.position)||void 0===_values$position3?void 0:_values$position3.y)-10,isInjury?z:null==values||null===(_values$position4=values.position)||void 0===_values$position4?void 0:_values$position4.z)}),Object(jsx_runtime.jsx)(Text.a,{ref:textRef,font:"",fontSize:.55,color:Colors.blueRibbon,children:capitalizeFirstLetter(name),scale:helpers_getScale(null==values?void 0:values.scale,isInjury,isFrontView),rotation:new three_module.Euler(80.1,0,0),position:new three_module.Vector3(isNegative(null==values||null===(_values$position5=values.position)||void 0===_values$position5?void 0:_values$position5.x)?-100:100,isFrontView?(null==values||null===(_values$position6=values.position)||void 0===_values$position6?void 0:_values$position6.y)+10:(null==values||null===(_values$position7=values.position)||void 0===_values$position7?void 0:_values$position7.y)-10,isInjury?z:null==values||null===(_values$position8=values.position)||void 0===_values$position8?void 0:_values$position8.z)})]}):null};try{text_lines_TextLines.displayName="TextLines",text_lines_TextLines.__docgenInfo={description:"",displayName:"TextLines",props:{clickedItem:{defaultValue:null,description:"",name:"clickedItem",required:!0,type:{name:"any"}},meshes:{defaultValue:null,description:"",name:"meshes",required:!0,type:{name:"any"}},isInjury:{defaultValue:{value:"false"},description:"",name:"isInjury",required:!1,type:{name:"boolean"}},isFrontView:{defaultValue:null,description:"",name:"isFrontView",required:!0,type:{name:"any"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/text-lines.tsx#TextLines"]={docgenInfo:text_lines_TextLines.__docgenInfo,name:"TextLines",path:"src/components/text-lines.tsx#TextLines"})}catch(__react_docgen_typescript_loader_error){}var muscle_meshes_MuscleMeshes=function MuscleMeshes(_ref){var activeMuscles=_ref.activeMuscles,isFrontView=_ref.isFrontView,onMuscleGroupClick=_ref.onMuscleGroupClick,muscleMeshes=_ref.muscleMeshes,textLineStartingPoints=_ref.textLineStartingPoints,gender=_ref.gender,_useMuscleMeshesActio=function useMuscleMeshesActions(_ref){var onMuscleGroupClick=_ref.onMuscleGroupClick,_useState=Object(react.useState)([]),_useState2=Object(slicedToArray.a)(_useState,2),hovered=_useState2[0],setHovered=_useState2[1],_useState3=Object(react.useState)(""),_useState4=Object(slicedToArray.a)(_useState3,2),clickedMuscle=_useState4[0],setClickedMuscle=_useState4[1],_useState5=Object(react.useState)([]),_useState6=Object(slicedToArray.a)(_useState5,2),clickedGroup=_useState6[0],setClickedGroup=_useState6[1],onHover=Object(react.useCallback)((function(e){e.stopPropagation(),setHovered(MuscleCollection[String(helpers_getMuscleGroupKey(e.object.name))])}),[setHovered]),onLeave=Object(react.useCallback)((function(e){e.stopPropagation(),setHovered([]),setClickedMuscle("")}),[setHovered,setClickedMuscle]),onClick=Object(react.useCallback)((function(e){e.stopPropagation(),setClickedMuscle(e.object.name);var muscleGroup=MuscleCollection[String(helpers_getMuscleGroupKey(e.object.name))];if(muscleGroup){var newArray=Object(toConsumableArray.a)(clickedGroup);newArray=(null==clickedGroup?void 0:clickedGroup.includes(e.object.name))?newArray.filter((function(item){return!(null==muscleGroup?void 0:muscleGroup.includes(item))})):[].concat(Object(toConsumableArray.a)(newArray),Object(toConsumableArray.a)(muscleGroup)),setClickedGroup(newArray)}onMuscleGroupClick&&onMuscleGroupClick(e.object.name)}),[clickedGroup,setClickedGroup,onMuscleGroupClick,setClickedMuscle]);return{hovered:hovered,clickedMuscle:clickedMuscle,clickedGroup:clickedGroup,onHover:onHover,onLeave:onLeave,onClick:onClick}}({onMuscleGroupClick:onMuscleGroupClick}),hovered=_useMuscleMeshesActio.hovered,clickedMuscle=_useMuscleMeshesActio.clickedMuscle,clickedGroup=_useMuscleMeshesActio.clickedGroup,onHover=_useMuscleMeshesActio.onHover,onLeave=_useMuscleMeshesActio.onLeave,onClick=_useMuscleMeshesActio.onClick;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[function printMeshes(array){return array.map((function(item){return"Object3D"===item.type?Object(jsx_runtime.jsx)("group",Object(objectSpread2.a)(Object(objectSpread2.a)({},item),{},{children:printMeshes(item.children)}),null==item?void 0:item.id):Object(jsx_runtime.jsx)("mesh",Object(objectSpread2.a)(Object(objectSpread2.a)({onPointerEnter:onHover,onPointerLeave:onLeave,onClick:onClick,position:(null==item||null===(_item$name=item.name)||void 0===_item$name?void 0:_item$name.includes("injury"))?helpers_getPosition(item):null==item?void 0:item.position},item),{},{children:Object(jsx_runtime.jsx)("meshPhysicalMaterial",{color:helpers_getMeshColor(item.name,clickedGroup,hovered,activeMuscles)})}),null==item?void 0:item.id);var _item$name}))}(muscleMeshes),muscleMeshes.map((function(item){var _item$name2;return Object(jsx_runtime.jsx)("mesh",Object(objectSpread2.a)(Object(objectSpread2.a)({onPointerEnter:onHover,onPointerLeave:onLeave,onClick:onClick,position:(null==item||null===(_item$name2=item.name)||void 0===_item$name2?void 0:_item$name2.includes("injury"))?helpers_getPosition(item):null==item?void 0:item.position,visible:!1},item),{},{children:Object(jsx_runtime.jsx)("meshPhysicalMaterial",{color:helpers_getMeshColor(item.name,clickedGroup,hovered,activeMuscles)})}),null==item?void 0:item.id)})),Object(jsx_runtime.jsx)(text_lines_TextLines,{clickedItem:clickedMuscle,meshes:textLineStartingPoints,isFrontView:isFrontView,gender:gender})]})};try{muscle_meshes_MuscleMeshes.displayName="MuscleMeshes",muscle_meshes_MuscleMeshes.__docgenInfo={description:"",displayName:"MuscleMeshes",props:{activeMuscles:{defaultValue:null,description:"",name:"activeMuscles",required:!0,type:{name:"[{ name: string; stimulation: string; }]"}},nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"any"}},muscleMeshes:{defaultValue:null,description:"",name:"muscleMeshes",required:!0,type:{name:"any"}},textLineStartingPoints:{defaultValue:null,description:"",name:"textLineStartingPoints",required:!0,type:{name:"any"}},isFrontView:{defaultValue:null,description:"",name:"isFrontView",required:!0,type:{name:"boolean"}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"enum",value:[{value:'"non-binary"'},{value:'"female"'},{value:'"male"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/muscle-meshes.tsx#MuscleMeshes"]={docgenInfo:muscle_meshes_MuscleMeshes.__docgenInfo,name:"MuscleMeshes",path:"src/components/muscle-meshes.tsx#MuscleMeshes"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["injuryMarks","injuries","isFrontView","onMuscleGroupClick","gender"],injury_meshes_InjuryMeshes=function InjuryMeshes(_ref){var injuryMarks=_ref.injuryMarks,injuries=_ref.injuries,isFrontView=_ref.isFrontView,onMuscleGroupClick=_ref.onMuscleGroupClick,gender=_ref.gender,props=Object(objectWithoutProperties.a)(_ref,_excluded),scene=Object(react_three_fiber_esm.d)().scene,_useInjuryMeshesActio=function useInjuryMeshesActions(_ref2){var onMuscleGroupClick=_ref2.onMuscleGroupClick,injuryMarks=_ref2.injuryMarks,injuries=_ref2.injuries,_useState7=Object(react.useState)(""),_useState8=Object(slicedToArray.a)(_useState7,2),clickedInjury=_useState8[0],setClickedInjury=_useState8[1],_useState9=Object(react.useState)([]),_useState10=Object(slicedToArray.a)(_useState9,2),createdInjuries=_useState10[0],setCreatedInjuries=_useState10[1];return{filteredInjuryMarks:Object(react.useMemo)((function(){return injuryMarks.filter((function(mark){return injuries.some((function(injury){var _mark$name;return null==mark||null===(_mark$name=mark.name)||void 0===_mark$name?void 0:_mark$name.includes(injury.location)}))}))}),[injuries,injuryMarks]),clickedInjury:clickedInjury,onLeave:Object(react.useCallback)((function(e){e.stopPropagation(),setClickedInjury("")}),[setClickedInjury]),onClick:Object(react.useCallback)((function(e){e.stopPropagation();var key=e.object.name,newKey=null==key?void 0:key.split("_")[(null==key?void 0:key.split("_").length)-1];setClickedInjury(newKey),onMuscleGroupClick&&onMuscleGroupClick(e.object.name)}),[setClickedInjury,onMuscleGroupClick]),createdInjuries:createdInjuries,setCreatedInjuries:setCreatedInjuries}}({onMuscleGroupClick:onMuscleGroupClick,injuryMarks:injuryMarks,injuries:injuries}),filteredInjuryMarks=_useInjuryMeshesActio.filteredInjuryMarks,clickedInjury=_useInjuryMeshesActio.clickedInjury,onLeave=_useInjuryMeshesActio.onLeave,onClick=_useInjuryMeshesActio.onClick,createdInjuries=_useInjuryMeshesActio.createdInjuries,setCreatedInjuries=_useInjuryMeshesActio.setCreatedInjuries;return Object(react.useEffect)((function(){for(var _scene$children$filte,_scene$children$filte2;scene.children.length>1;)scene.remove(scene.children[1]);var injuriesGroup=new three_module.Group;injuriesGroup.name="injuries",scene.add(injuriesGroup);for(var i=0;i<filteredInjuryMarks.length;i++)helpers_createInjuries(injuriesGroup,filteredInjuryMarks[i].name,filteredInjuryMarks[i]);var injuriesGroupChildren=null===(_scene$children$filte=scene.children.filter((function(group){return"injuries"===group.name})))||void 0===_scene$children$filte||null===(_scene$children$filte2=_scene$children$filte[0])||void 0===_scene$children$filte2?void 0:_scene$children$filte2.children;setCreatedInjuries(injuriesGroupChildren)}),[scene,isFrontView,filteredInjuryMarks,setCreatedInjuries]),Object(react_three_fiber_esm.b)((function(){scene.traverse((function(obj){var _obj$parent,_obj$userData,_obj$userData2;"injuries"!==(null==obj||null===(_obj$parent=obj.parent)||void 0===_obj$parent?void 0:_obj$parent.name)||"fade"!==(null===(_obj$userData=obj.userData)||void 0===_obj$userData?void 0:_obj$userData.type)&&"fade-delayed"!==(null===(_obj$userData2=obj.userData)||void 0===_obj$userData2?void 0:_obj$userData2.type)||(animateInjuryOuterRing(obj),animateInjuryInnerRing(obj))}))})),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("group",{scale:"male"===gender?[2,2,2]:[1,1,1],children:filteredInjuryMarks.map((function(injury){return Object(jsx_runtime.jsx)("mesh",Object(objectSpread2.a)(Object(objectSpread2.a)({onClick:onClick,onPointerLeave:onLeave,name:"created_".concat(injury.name),userData:{injury:injury.name},position:helpers_getPosition(injury)},injury),{},{children:Object(jsx_runtime.jsx)("meshStandardMaterial",{attach:"material",transparent:!0,opacity:0})}),null==injury?void 0:injury.id)}))}),Object(jsx_runtime.jsx)(text_lines_TextLines,Object(objectSpread2.a)({clickedItem:clickedInjury,meshes:createdInjuries,isFrontView:isFrontView,gender:gender,isInjury:!0},props))]})};try{injury_meshes_InjuryMeshes.displayName="InjuryMeshes",injury_meshes_InjuryMeshes.__docgenInfo={description:"",displayName:"InjuryMeshes",props:{injuryMarks:{defaultValue:null,description:"",name:"injuryMarks",required:!0,type:{name:"any"}},injuries:{defaultValue:null,description:"",name:"injuries",required:!0,type:{name:"any"}},isFrontView:{defaultValue:null,description:"",name:"isFrontView",required:!0,type:{name:"boolean"}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"enum",value:[{value:'"non-binary"'},{value:'"female"'},{value:'"male"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/injury-meshes.tsx#InjuryMeshes"]={docgenInfo:injury_meshes_InjuryMeshes.__docgenInfo,name:"InjuryMeshes",path:"src/components/injury-meshes.tsx#InjuryMeshes"})}catch(__react_docgen_typescript_loader_error){}var toArray=__webpack_require__(476);var model_excluded=["muscleGroups","injuries","rotation","source","gender"],model_Model=function Model(_ref){var muscleGroups=_ref.muscleGroups,injuries=_ref.injuries,rotation=_ref.rotation,source=_ref.source,gender=_ref.gender,props=Object(objectWithoutProperties.a)(_ref,model_excluded),isFrontView=Object(react.useMemo)((function(){return"non"===rotation}),[rotation]),nodes=Object(useGLTF.a)(source).nodes,_useMeshes=function useMeshes(_ref){var injuryMarks_grp,textLineStartingPoint_grp,humanGroup,nodes=_ref.nodes,gender=_ref.gender,isFrontView=_ref.isFrontView,children=nodes.Scene.children;"non-binary"===gender?(injuryMarks_grp=children[0],textLineStartingPoint_grp=children[1],humanGroup=children[2]):"male"===gender?(injuryMarks_grp=children[1],textLineStartingPoint_grp=children[2],humanGroup=children[0]):"female"===gender&&(injuryMarks_grp=children[0],textLineStartingPoint_grp=children[1],humanGroup=children[2]);var injuryMarks_back_grp=injuryMarks_grp.children[0].children,injuryMarks_front_grp=injuryMarks_grp.children[1].children,injuryMarks=isFrontView?injuryMarks_front_grp:injuryMarks_back_grp,textLineStartingPoint_back_grp=textLineStartingPoint_grp.children[0].children,textLineStartingPoint_front_grp=textLineStartingPoint_grp.children[1].children,textLineStartingPoints=isFrontView?textLineStartingPoint_front_grp:textLineStartingPoint_back_grp,_humanGroup$children=Object(toArray.a)(humanGroup.children),back=_humanGroup$children[0],front=_humanGroup$children[1],rest=_humanGroup$children.slice(2),backMeshes=[back].concat(Object(toConsumableArray.a)(rest)),frontMeshes=[front].concat(Object(toConsumableArray.a)(rest));return{muscleMeshes:[].concat(Object(toConsumableArray.a)(isFrontView?frontMeshes:backMeshes),[injuryMarks_grp]),textLineStartingPoints:textLineStartingPoints,injuryMarks:injuryMarks}}({nodes:nodes,gender:gender,isFrontView:isFrontView}),muscleMeshes=_useMeshes.muscleMeshes,textLineStartingPoints=_useMeshes.textLineStartingPoints,injuryMarks=_useMeshes.injuryMarks;return Object(jsx_runtime.jsx)("group",{dispose:null,children:Object(jsx_runtime.jsxs)("group",{rotation:[Math.PI/2,0,isFrontView?0:15.7],scale:"male"===gender?[.005,.005,.005]:[.01,.01,.01],children:[Object(jsx_runtime.jsx)(muscle_meshes_MuscleMeshes,Object(objectSpread2.a)({activeMuscles:muscleGroups,muscleMeshes:muscleMeshes,textLineStartingPoints:textLineStartingPoints,isFrontView:isFrontView,nodes:nodes,gender:gender},props)),Object(jsx_runtime.jsx)(injury_meshes_InjuryMeshes,Object(objectSpread2.a)({injuryMarks:injuryMarks,injuries:injuries,isFrontView:isFrontView,gender:gender},props))]})})};try{model_Model.displayName="Model",model_Model.__docgenInfo={description:"",displayName:"Model",props:{muscleGroups:{defaultValue:null,description:"",name:"muscleGroups",required:!0,type:{name:"[{ name: string; stimulation: Stimulation; }]"}},injuries:{defaultValue:null,description:"",name:"injuries",required:!1,type:{name:"InjuryVisualization[]"}},rotation:{defaultValue:null,description:"",name:"rotation",required:!1,type:{name:"enum",value:[{value:'"non"'},{value:"180"}]}},source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"string"}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}},gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"enum",value:[{value:'"non-binary"'},{value:'"female"'},{value:'"male"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/model.tsx#Model"]={docgenInfo:model_Model.__docgenInfo,name:"Model",path:"src/components/model.tsx#Model"})}catch(__react_docgen_typescript_loader_error){}var useProgress=__webpack_require__(872),Html=__webpack_require__(873),loader_Loader=function Loader(){var progress=Object(useProgress.a)().progress;return Object(jsx_runtime.jsxs)(Html.a,{center:!0,children:[progress," % loaded"]})};var anatomy_visualization_excluded=["muscleGroups","zoom","gender"],anatomy_visualization_AnatomyVisualization=function AnatomyVisualization(_ref){var muscleGroups=_ref.muscleGroups,zoom=_ref.zoom,gender=_ref.gender,props=Object(objectWithoutProperties.a)(_ref,anatomy_visualization_excluded),_useMuscleGroup=function useMuscleGroup(_ref){var muscleGroups=_ref.muscleGroups;return{activeMuscles:Object(react.useMemo)((function(){return muscleGroups.reduce((function(accumulator,currentValue){return MuscleCollection[currentValue.name].map((function(item){return accumulator.push({name:item,stimulation:currentValue.stimulation})})),accumulator}),[])}),[muscleGroups])}}({muscleGroups:muscleGroups}),activeMuscles=_useMuscleGroup.activeMuscles,getModelByGender=Object(react.useCallback)((function(gender){return"male"===gender?"./assets/male_07.glb":"female"===gender?"./assets/female_05.glb":"./assets/nonBinary_15.glb"}),[]),camera=Object(react_three_fiber_esm.d)().camera;return Object(react_three_fiber_esm.b)((function(){"initial"===zoom?(camera.clearViewOffset(),camera.setFocalLength(35)):"top"===zoom?(camera.setViewOffset(window.innerWidth,window.innerHeight,0,-425,window.innerWidth,window.innerHeight),camera.setFocalLength(60)):"bottom"===zoom&&(camera.setViewOffset(window.innerWidth,window.innerHeight,0,275,window.innerWidth,window.innerHeight),camera.setFocalLength(60))})),Object(jsx_runtime.jsx)(react.Suspense,{fallback:Object(jsx_runtime.jsx)(loader_Loader,{}),children:Object(jsx_runtime.jsx)(Stage.a,{adjustCamera:!0,intensity:1,environment:"city",preset:"rembrandt",children:Object(jsx_runtime.jsx)(model_Model,Object(objectSpread2.a)({source:getModelByGender(gender),muscleGroups:activeMuscles,gender:gender},props))})})};try{anatomy_visualization_AnatomyVisualization.displayName="AnatomyVisualization",anatomy_visualization_AnatomyVisualization.__docgenInfo={description:"",displayName:"AnatomyVisualization",props:{gender:{defaultValue:null,description:"",name:"gender",required:!0,type:{name:"enum",value:[{value:'"non-binary"'},{value:'"female"'},{value:'"male"'}]}},muscleGroups:{defaultValue:null,description:"",name:"muscleGroups",required:!0,type:{name:"MuscleGroupVisualization[]"}},injuries:{defaultValue:null,description:"",name:"injuries",required:!1,type:{name:"InjuryVisualization[]"}},rotation:{defaultValue:null,description:"",name:"rotation",required:!1,type:{name:"enum",value:[{value:'"non"'},{value:"180"}]}},onMuscleGroupClick:{defaultValue:null,description:"",name:"onMuscleGroupClick",required:!1,type:{name:"(groupId: MuscleGroup) => void"}},zoom:{defaultValue:null,description:"",name:"zoom",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/anatomy-visualization.tsx#AnatomyVisualization"]={docgenInfo:anatomy_visualization_AnatomyVisualization.__docgenInfo,name:"AnatomyVisualization",path:"src/components/anatomy-visualization.tsx#AnatomyVisualization"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Anatomy Visualization",component:anatomy_visualization_AnatomyVisualization,argTypes:{gender:{options:["male","female","non-binary"],control:{type:"radio"}},rotation:{options:["non",180],control:{type:"radio"}}}};var ModelScene=function Model(args){return Object(jsx_runtime.jsx)(react_three_fiber_esm.a,{dpr:[2,4],style:{width:window.innerWidth,height:window.innerHeight},camera:{fov:50},children:Object(jsx_runtime.jsx)(anatomy_visualization_AnatomyVisualization,Object(objectSpread2.a)({gender:"non-binary",muscleGroups:[],injuries:[]},args))})}.bind({});ModelScene.args={gender:"non-binary",rotation:"non",muscleGroups:[{name:"Calves",stimulation:"low"},{name:"TibialisAnterior",stimulation:"medium"},{name:"ErectorSpinae",stimulation:"high"},{name:"Chest",stimulation:"dangerous"}],injuries:[{location:"shoulder"},{location:"abs"},{location:"wrist"},{location:"knee"},{location:"lowerBack"}]},ModelScene.parameters=Object(objectSpread2.a)({storySource:{source:"(args: any) => (\n  <Canvas\n    dpr={[2, 4]}\n    style={{ width: window.innerWidth, height: window.innerHeight }}\n    camera={{ fov: 50 }}\n  >\n    <AnatomyVisualization\n      gender={'non-binary'}\n      muscleGroups={[]}\n      injuries={[]}\n      {...args}\n    />\n  </Canvas>\n)"}},ModelScene.parameters)},865:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));var client_api=__webpack_require__(878),esm=__webpack_require__(5),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},layout:"centered"};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))}},[[496,2,3]]]);